<!DOCTYPE html>
<html>
<head>
	<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1">
	<!-- <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" /> -->
	<meta charset="utf-8">
	<title>英雄介绍</title>
	<link rel="stylesheet" type="text/css" href="./css/main.css">
	<script src="./js/vue.min.js"></script>
	<style type="text/css">
		/*默认滚动条样式只作用于webkit内核*/
		::-webkit-scrollbar {
		    width: 8px;
		    height: 8px;
		}
		::-webkit-scrollbar-track {
		    border: 1px #d3d3d3 solid;
		    box-shadow: 0px 0px 3px #dfdfdf inset;
		    border-radius: 10px;
		    background: #eee;
		}
		::-webkit-scrollbar-thumb {
		    border: 1px #808080 solid;
		    border-radius: 10px;
		    background: #a98549;
		}
		/* end */
		/* ie下消除input中的 × */
		::-ms-clear, ::-ms-reveal{
			display: none;
		}
		/* end */
		body {
			background-image: url(./images/bg-heros.png);
			background-size: cover;
		}
		.input-search {
			width: 208px;
			height: 36px;
			margin: 30px auto 0;
			background: #000306;
			border: 2px #785a28 solid;
		}
		.input-search::after {
			display: block;
		    content: '';
		    height: 66px;
		    border-bottom: 1px #1e282d solid;
		}
		.input-search input {
			float: left;
			width: 150px;
		    height: 20px;
		    line-height: 20px;
		    margin-top: 8px;
		    background: #000306;
		    border: 0 none;
		    font-size: 16px;
		    color: #9c9788;
		    outline: none;
		}
		.icon-search, .icon-close {
			width: 20px;
		    height: 20px;
		    margin: 9px 4px 0;
		    background-size: 20px 20px;
		    background-repeat: no-repeat;
		}
		.icon-search {
			float: left;
    		background-image: url(./fonts/search.svg);
		}
		.icon-close {
			float: right;
    		background-image: url(./fonts/close.svg);
		}
		.items-filter::before {
			display: block;
		    content: '';
		    height: 31px;
		}
		.items-filter ul li {
			font-size: 16px;
			height: 22px;
			padding: 20px;
			color: #9c9789;
		}
		.items-filter ul li:hover {
			cursor: pointer;
			background-color: #1e2328;
		}
		.items-filter ul {
			padding: 0;
		}
		.icon-check {
			float: left;
			width: 16px;
			height: 16px;
			margin: 1px 20px 1px 1px;
			border: 2px #785a28 solid;
		}
		.icon-select {
			position: absolute;
			width: 20px;
			height: 20px;
			left: 22px;
			z-index: 99;
			background-size: 20px 20px;
		    background-repeat: no-repeat;
		    background-image: url(./fonts/selected.svg);
		}
		.flex-content {
			display: flex;
		    flex-direction: row;
		    flex-wrap: wrap;
		    justify-content: flex-start;
		    align-items: flex-start;
		}
		.flex-item {
			display: flex;
			flex-direction: column-reverse;
			width: 88px;
			height: 88px;
			background-size: cover;
			background-repeat: no-repeat;
		}
		.hero-box {
			font-size: 10px;
			color: #d8d0bd;
			cursor: pointer;
			text-align: center;
			border: 1px #785a28 solid;
		}
		.flex-lt {
			position: unset;
		}
		.flex-gt {
			height: 500px;
			padding: 20px !important;
			/* ie下显示滚动条 */
			-ms-overflow-y: auto;
			overflow-y: auto;
		}
	</style>
</head>
<body>
	<!-- 导航 -->
	<div class="navbars">
		<nav>
			<!-- logo -->
			<div class="nav-left">
	            <a href="index.html" class="nav-logo"></a>
	        </div>
	        <!--  -->
	        <ul>
	        	<li><a href="game.html">游戏介绍</a></li>
	        	<li><a href="guide.html">新手指引</a></li>
	        	<li><a href="hero.html">英雄介绍</a></li>
	        	<li><a href="">视频专区</a></li>
	        </ul>
	        <div class="nav-right">
	        	<a href="login.html" class="nav-download nav-transition">登陆/注册</a>
	        </div>
	        <!-- 移动端导航 -->
	        <div class="nav-bottom">
	        	<div class="opt">
	        		<a href="index.html">首页</a>
	        		<a href="game.html">游戏介绍</a>
	        		<a href="guide.html">新手指引</a>
	        		<a href="hero.html">英雄介绍</a>
	        		<a href="">视频专区</a>
	        	</div>
	        </div>
	        <!-- end 移动端导航 -->
		</nav>
	</div>
	<!-- end 导航-->

	<section class="flex-slide">
		<!-- 此处并没有让他fixed -->
		<div class="slide-box flex-lt">
			<!-- 搜索框 -->
			<div class="input-search">
				<i class="icon-search"></i>
				<i class="icon-close" style="display: none;"></i>
				<input type="text" placeholder="搜索" id="search" maxlength="8" >
			</div>
			<!-- 过滤选项 -->
			<div class="items-filter">
				<ul>
					<li><i class="icon-check"></i><i class="icon-select" style="display: none;"></i><span>刺客</span></li>
					<li><i class="icon-check"></i><i class="icon-select" style="display: none;"></i><span>战士</span></li>
					<li><i class="icon-check"></i><i class="icon-select" style="display: none;"></i><span>法师</span></li>
					<li><i class="icon-check"></i><i class="icon-select" style="display: none;"></i><span>射手</span></li>
					<li><i class="icon-check"></i><i class="icon-select" style="display: none;"></i><span>辅助</span></li>
					<li><i class="icon-check"></i><i class="icon-select" style="display: none;"></i><span>坦克</span></li>
				</ul>
			</div>
		</div>
		<!-- 英雄列表 -->
		<div class="content-box flex-gt" id="heroContainer" style="display: none;">
			<div class="flex-content">
				<div class="flex-item hero-box" v-for="hero in heros" :style="{backgroundImage: 'url(' + hero.avatar + ')'}" >
					<span>{{ hero.name }}</span>
				</div>
			</div>
		</div>
		<!-- 渲染数据 -->
		<script src="./js/LOLHeros.js"></script>
		<script>
			// 这里采用IIFE和闭包的形式是为了让外部(也就是全局作用域)无法获取vue实例
			// 并且由于形成闭包，内部作用域一直依然存在，所以它也不会被销毁
			(function (global) {
				// vue实例
				var vm = new Vue({
					el: '#heroContainer',
					data: {
						heros: global.LOLHeros
					},
					mounted: function () {
						this.$el.style.display = 'block';
					}
				});

				global.setData = function (data) {
					vm.heros = data;
				};

			})(window)
			

		</script>
	</section>

<script>
	window.onload = function () {
		// 按页面显示的顺序来
		var tags   = ['Assassin', 'Fighter', 'Mage', 'Marksman', 'Support', 'Tank'];
		var search = document.getElementById('search');
		var close  = document.querySelector('.input-search .icon-close');
		search.addEventListener('focus', function () {
			document.querySelector('.input-search').style.border = "2px #c4a361 solid";
		});
		search.addEventListener('blur', function () {
			document.querySelector('.input-search').style.border = "2px #785a28 solid";
		});
		var items    = document.querySelectorAll('.items-filter>ul>li');
		var selectes = Array.prototype.slice.call(document.querySelectorAll('.icon-select'));
		// 绑定所有‘复选框’的点击事件
		Array.prototype.forEach.call(items, function (item, index) {
			item.addEventListener('click', function () {
				selectes.forEach(function (s, i) {
					if (i === index) {
						// 选中了第index
						if (s.style.display === 'none') {
							// 必须将display: 'none'写在内联里下面的语句才能生效
							s.style.display = ''; // 勾选状态
							// 过滤英雄属性
							setData(LOLHeros.filter(function (i) {
								return i.tags.some(function (tag) {
									return tag === tags[index];
								});
							}));
						} else {
							// 全选状态
							s.style.display = 'none'; // 非勾选状态
							setData(LOLHeros.slice()); // 显示全部英雄
						}
					} else {
						s.style.display = 'none'; // 非勾选状态
					}
				});
			});
		});
		// 绑定搜索框的
		search.addEventListener('input', function () {
			// 显示可删除
			if (this.value)
				close.style.display = '';
			else
				close.style.display = 'none';
		});
		// 触发事件 兼容ie
		var fireEvent = function(element,event){
	        if (document.createEventObject){
	            // IE浏览器支持fireEvent方法
	            var evt = document.createEventObject();
	            return element.fireEvent('on' + event, evt);
	        }
	        else{
	            // 其他标准浏览器使用dispatchEvent方法
	            var evt = document.createEvent('HTMLEvents');
	            evt.initEvent(event, true, true);
	            return !element.dispatchEvent(evt);
	        }
	    };
		// 绑定删除事件
		close.addEventListener('click', function () {
			search.value = '';
			fireEvent(search, 'input');
		});
	}

</script>
</body>
</html>